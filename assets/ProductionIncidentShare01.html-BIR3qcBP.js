import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as t,o as n}from"./app-Ble-gPYH.js";const l={};function h(e,i){return n(),a("div",null,i[0]||(i[0]=[t(`<h1 id="ç”Ÿäº§äº‹æ•…åˆ†äº«01-redisç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®ä¸å½“å¯¼è‡´çš„çº¿ä¸Šæ•…éšœ" tabindex="-1"><a class="header-anchor" href="#ç”Ÿäº§äº‹æ•…åˆ†äº«01-redisç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®ä¸å½“å¯¼è‡´çš„çº¿ä¸Šæ•…éšœ"><span>ç”Ÿäº§äº‹æ•…åˆ†äº«01ï¼šRedisç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®ä¸å½“å¯¼è‡´çš„çº¿ä¸Šæ•…éšœ</span></a></h1><h2 id="ğŸ“‹-äº‹æ•…æ¦‚è§ˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ“‹-äº‹æ•…æ¦‚è§ˆ"><span>ğŸ“‹ äº‹æ•…æ¦‚è§ˆ</span></a></h2><table><thead><tr><th>é¡¹ç›®</th><th>è¯¦æƒ…</th></tr></thead><tbody><tr><td><strong>æ•…éšœæ—¶é—´</strong></td><td>2025å¹´XæœˆXæ—¥ XX:XX - XX:XX</td></tr><tr><td><strong>å½±å“æ—¶é•¿</strong></td><td>çº¦10åˆ†é’Ÿ</td></tr><tr><td><strong>æ•…éšœç­‰çº§</strong></td><td>P1ï¼ˆä¸¥é‡ï¼‰</td></tr><tr><td><strong>å½±å“èŒƒå›´</strong></td><td>æŸå•†å“è¯¦æƒ…é¡µé¢å…¨éƒ¨ç”¨æˆ·</td></tr><tr><td><strong>æ•…éšœç°è±¡</strong></td><td>ç”¨æˆ·è¯·æ±‚å•†å“è¯¦æƒ…é¡µé¢æ—¶ç³»ç»Ÿå“åº”&quot;å•†å“ä¸å­˜åœ¨&quot;å¼‚å¸¸</td></tr></tbody></table><h2 id="ğŸ¯-éœ€æ±‚èƒŒæ™¯" tabindex="-1"><a class="header-anchor" href="#ğŸ¯-éœ€æ±‚èƒŒæ™¯"><span>ğŸ¯ éœ€æ±‚èƒŒæ™¯</span></a></h2><p>å•†å“è¯¦æƒ…é¡µé¢é‡‡ç”¨Redisç¼“å­˜ä¼˜åŒ–ç­–ç•¥ï¼š</p><ul><li>ä½¿ç”¨Redis Hashç»“æ„å­˜å‚¨å•†å“è¯¦æƒ…æ•°æ®</li><li>ç¼“å­˜Keyæ ¹æ®è¯·æ±‚å‚æ•°åŠ¨æ€æ„å»º</li><li>ç¼“å­˜å‘½ä¸­æ—¶ç›´æ¥è¿”å›ï¼Œæœªå‘½ä¸­æ—¶æŸ¥è¯¢æ•°æ®åº“å¹¶æ›´æ–°ç¼“å­˜</li></ul><h2 id="ğŸ”-é—®é¢˜æ’æŸ¥è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#ğŸ”-é—®é¢˜æ’æŸ¥è¿‡ç¨‹"><span>ğŸ” é—®é¢˜æ’æŸ¥è¿‡ç¨‹</span></a></h2><h3 id="è¯¦ç»†æ’æŸ¥æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†æ’æŸ¥æ­¥éª¤"><span>è¯¦ç»†æ’æŸ¥æ­¥éª¤</span></a></h3><ol><li><p><strong>æ—¥å¿—åˆ†æ</strong></p><ul><li>æ ¹æ®ç”¨æˆ·tidæœç´¢æ—¥å¿—</li><li>å‘ç°åªæœ‰ç¬¬ä¸€æ¬¡è¯·æ±‚æœ‰é”™è¯¯æ—¥å¿—ï¼Œåç»­éƒ½å‘½ä¸­ç¼“å­˜</li></ul></li><li><p><strong>ç¼“å­˜æ•°æ®ç¡®è®¤</strong></p><ul><li>ç¡®è®¤Redisä¸­å­˜åœ¨å¼‚å¸¸æ•°æ®</li><li>åç»­10åˆ†é’Ÿçš„è¯·æ±‚éƒ½å‘½ä¸­äº†è¿™ä¸ªå¼‚å¸¸ç¼“å­˜</li></ul></li><li><p><strong>ä»£ç é€»è¾‘æ¢³ç†</strong></p><ul><li>å‘ç°ä¸ºé˜²æ­¢æ¶æ„è¯·æ±‚ï¼Œå¼‚å¸¸ç»“æœä¹Ÿä¼šè¢«ç¼“å­˜</li><li>å¼‚å¸¸æ•°æ®ç¼“å­˜10ç§’ï¼Œæ­£å¸¸æ•°æ®ç¼“å­˜10åˆ†é’Ÿ</li></ul></li><li><p><strong>æ ¹å› å®šä½</strong></p><ul><li>å‘ç°<code>expires</code>æ“ä½œå½±å“æ•´ä¸ªMapçš„è¿‡æœŸæ—¶é—´</li><li>ç¼“å­˜Keyæ„å»ºé€»è¾‘ä¸å®Œæ•´ï¼Œå¯¼è‡´Keyå†²çª</li></ul></li></ol><h2 id="ğŸ›-é—®é¢˜æ ¹å› åˆ†æ" tabindex="-1"><a class="header-anchor" href="#ğŸ›-é—®é¢˜æ ¹å› åˆ†æ"><span>ğŸ› é—®é¢˜æ ¹å› åˆ†æ</span></a></h2><h3 id="é—®é¢˜ä»£ç " tabindex="-1"><a class="header-anchor" href="#é—®é¢˜ä»£ç "><span>é—®é¢˜ä»£ç </span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// é—®é¢˜ä»£ç ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> cacheData</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> isException) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å°†æ•°æ®æ”¾å…¥ç¼“å­˜ä¸­</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    redisOperation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hset</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(mapKey, key, value);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ›´æ–°ç¼“å­˜è¿‡æœŸæ—¶é—´ - è¿™é‡Œæ˜¯é—®é¢˜æ‰€åœ¨ï¼</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> expireSecond </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> isException </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 600</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    redisOperation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">expire</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(mapKey, expireSecond);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // å½±å“æ•´ä¸ªMapï¼</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="é—®é¢˜æµç¨‹å›¾" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜æµç¨‹å›¾"><span>é—®é¢˜æµç¨‹å›¾</span></a></h3><img src="https://www.plantuml.com/plantuml/svg/TP5FJy8m78Rl_HJbDcvuyR0THA_63x748Kl6MDWyU5DY02D4o43G4KWm4XF3Xj70tC1zcVNFleN5JhEBlJJfqpnztr-BfYNNhFEA1d9MMQaeqD1aLGVWvnW0aVHVS6jzYEvwoUKLsjIHxrDlZT_g4cFl8GcdP6EZnOWZF5ZYZiiGTR_8rZsH3HeryNYAXwja-17xmLx1bFwiHzoA5qyPgrg20bSUAnV4yL6tVP27B9iE1JpoyW2o9QBUDlON_55-M-A0HdtaJ58GsdWovi2qgWPGD5E10khEKmkUFbDlnaEZm4uLtCTJ_HRYxdzAxHTshNPNzAgbm9fwLhP4IAE7fDccymPnxkEW4N_UefiEURnc8-2Yj4bcS7JsYi9LCeXGQxcJvhBPzLEr18fiOv_r3G00" alt=""><h3 id="æ ¹å› æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ ¹å› æ€»ç»“"><span>æ ¹å› æ€»ç»“</span></a></h3><ol><li><strong>Redisæ“ä½œè¯¯åŒº</strong>ï¼š<code>expire</code>å‘½ä»¤ä½œç”¨äºæ•´ä¸ªMapï¼Œè€Œéå•ä¸ªfield</li><li><strong>ç¼“å­˜Keyè®¾è®¡ç¼ºé™·</strong>ï¼šKeyæ„å»ºæ—¶é—æ¼å…³é”®å‚æ•°ï¼Œå¯¼è‡´ä¸åŒè¯·æ±‚å…±äº«ç¼“å­˜</li><li><strong>å¼‚å¸¸å¤„ç†é€»è¾‘é—®é¢˜</strong>ï¼šå¼‚å¸¸æ•°æ®çš„çŸ­æœŸç¼“å­˜è¢«æ­£å¸¸æ•°æ®çš„é•¿æœŸç¼“å­˜è¦†ç›–</li></ol><h2 id="ğŸ’¡-è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ’¡-è§£å†³æ–¹æ¡ˆ"><span>ğŸ’¡ è§£å†³æ–¹æ¡ˆ</span></a></h2><h3 id="ä¸´æ—¶è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#ä¸´æ—¶è§£å†³æ–¹æ¡ˆ"><span>ä¸´æ—¶è§£å†³æ–¹æ¡ˆ</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ç«‹å³æ¸…ç†é—®é¢˜ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-cli</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DEL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> problematic_cache_key</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># é‡å¯ç›¸å…³æœåŠ¡å®ä¾‹</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="æ°¸ä¹…è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#æ°¸ä¹…è§£å†³æ–¹æ¡ˆ"><span>æ°¸ä¹…è§£å†³æ–¹æ¡ˆ</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å®Œå–„ç¼“å­˜Keyæ„å»ºé€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> buildCacheKey</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RequestParam</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> param) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;%s:%s:%s&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        param</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        param</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        param</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // åŒ…å«æ‰€æœ‰å…³é”®å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="ğŸ“š-ç»éªŒæ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-ç»éªŒæ€»ç»“"><span>ğŸ“š ç»éªŒæ€»ç»“</span></a></h2><h3 id="ğŸ¯-æ ¸å¿ƒæ•™è®­" tabindex="-1"><a class="header-anchor" href="#ğŸ¯-æ ¸å¿ƒæ•™è®­"><span>ğŸ¯ æ ¸å¿ƒæ•™è®­</span></a></h3><ol><li><p><strong>Redisæ•°æ®ç»“æ„ç†è§£</strong></p><ul><li><code>EXPIRE</code>å‘½ä»¤ä½œç”¨äºæ•´ä¸ªKeyï¼Œä¸æ˜¯Hashçš„å•ä¸ªfield</li><li>éœ€è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„</li></ul></li><li><p><strong>ç¼“å­˜è®¾è®¡åŸåˆ™</strong></p><ul><li>å¼‚å¸¸æ•°æ®å’Œæ­£å¸¸æ•°æ®åº”è¯¥åˆ†ç¦»å­˜å‚¨</li><li>ç¼“å­˜Keyè®¾è®¡è¦åŒ…å«æ‰€æœ‰å½±å“ç»“æœçš„å‚æ•°</li><li>é¿å…ä¸åŒç±»å‹æ•°æ®å…±äº«ç¼“å­˜ç©ºé—´</li></ul></li><li><p><strong>æ•…éšœæ’æŸ¥æ–¹æ³•</strong></p><ul><li>æ—¥å¿— + ä»£ç  + ç¼“å­˜æ•°æ®ä¸‰é‡éªŒè¯</li><li>æ—¶é—´çº¿æ¢³ç†æœ‰åŠ©äºå¿«é€Ÿå®šä½é—®é¢˜</li></ul></li></ol><h3 id="ğŸ› ï¸-æ”¹è¿›æªæ–½" tabindex="-1"><a class="header-anchor" href="#ğŸ› ï¸-æ”¹è¿›æªæ–½"><span>ğŸ› ï¸ æ”¹è¿›æªæ–½</span></a></h3><table><thead><tr><th>æ”¹è¿›é¡¹</th><th>å…·ä½“æªæ–½</th><th>è´Ÿè´£äºº</th><th>å®Œæˆæ—¶é—´</th></tr></thead><tbody><tr><td><strong>ä»£ç è§„èŒƒ</strong></td><td>åˆ¶å®šRedisä½¿ç”¨è§„èŒƒæ–‡æ¡£</td><td>æ¶æ„å¸ˆ</td><td>1å‘¨å†…</td></tr><tr><td><strong>Code Review</strong></td><td>ç¼“å­˜ç›¸å…³ä»£ç å¼ºåˆ¶Review</td><td>Tech Lead</td><td>ç«‹å³æ‰§è¡Œ</td></tr><tr><td><strong>ç›‘æ§å‘Šè­¦</strong></td><td>å¢åŠ ç¼“å­˜å¼‚å¸¸æ•°æ®ç›‘æ§</td><td>è¿ç»´å›¢é˜Ÿ</td><td>2å‘¨å†…</td></tr><tr><td><strong>å•å…ƒæµ‹è¯•</strong></td><td>è¡¥å……ç¼“å­˜é€»è¾‘å•å…ƒæµ‹è¯•</td><td>å¼€å‘å›¢é˜Ÿ</td><td>1å‘¨å†…</td></tr></tbody></table><h3 id="ğŸ”§-æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#ğŸ”§-æœ€ä½³å®è·µ"><span>ğŸ”§ æœ€ä½³å®è·µ</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ¨èçš„ç¼“å­˜è®¾è®¡æ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ProductCacheManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ­£å¸¸æ•°æ®ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> NORMAL_CACHE_PREFIX </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;product:normal:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å¼‚å¸¸æ•°æ®ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> EXCEPTION_CACHE_PREFIX </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;product:exception:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> cacheProductData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ProductData</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> cacheKey</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> NORMAL_CACHE_PREFIX </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> key;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        redisTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">opsForValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(cacheKey, data, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Duration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ofMinutes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> cacheExceptionData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> errorMsg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> cacheKey</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> EXCEPTION_CACHE_PREFIX </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> key;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        redisTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">opsForValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(cacheKey, errorMsg, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Duration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ofSeconds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ„å»ºå®Œæ•´çš„ç¼“å­˜Key</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> buildCacheKey</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ProductRequest</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> DigestUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">md5Hex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getProductId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getUserType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRegion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        );</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ğŸ“‹-é¢„é˜²æ£€æŸ¥æ¸…å•" tabindex="-1"><a class="header-anchor" href="#ğŸ“‹-é¢„é˜²æ£€æŸ¥æ¸…å•"><span>ğŸ“‹ é¢„é˜²æ£€æŸ¥æ¸…å•</span></a></h3><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> Rediså‘½ä»¤æ˜¯å¦æ­£ç¡®ç†è§£å…¶ä½œç”¨èŒƒå›´ï¼Ÿ</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" disabled="disabled"><label class="task-list-item-label" for="task-item-1"> ç¼“å­˜Keyæ˜¯å¦åŒ…å«æ‰€æœ‰ç›¸å…³å‚æ•°ï¼Ÿ</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" disabled="disabled"><label class="task-list-item-label" for="task-item-2"> å¼‚å¸¸æ•°æ®å’Œæ­£å¸¸æ•°æ®æ˜¯å¦åˆ†ç¦»å­˜å‚¨ï¼Ÿ</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-3" disabled="disabled"><label class="task-list-item-label" for="task-item-3"> æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç›‘æ§å’Œå‘Šè­¦ï¼Ÿ</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-4" disabled="disabled"><label class="task-list-item-label" for="task-item-4"> æ˜¯å¦æœ‰å®Œå–„çš„å•å…ƒæµ‹è¯•è¦†ç›–ï¼Ÿ</label></li></ul><hr><p><strong>åæ€</strong>ï¼šè¿™æ¬¡äº‹æ•…æé†’æˆ‘ä»¬ï¼Œå¯¹äºåŸºç¡€ç»„ä»¶çš„ç†è§£ä¸èƒ½åœç•™åœ¨è¡¨é¢ï¼Œéœ€è¦æ·±å…¥ç†è§£å…¶å·¥ä½œåŸç†ã€‚åŒæ—¶ï¼Œå®Œå–„çš„æµ‹è¯•å’Œç›‘æ§ä½“ç³»æ˜¯é¢„é˜²æ­¤ç±»é—®é¢˜çš„å…³é”®ã€‚</p>`,32)]))}const r=s(l,[["render",h]]),d=JSON.parse('{"path":"/posts/incident/ProductionIncidentShare01.html","title":"ç”Ÿäº§äº‹æ•…åˆ†äº«01ï¼šRedisç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®ä¸å½“å¯¼è‡´çš„çº¿ä¸Šæ•…éšœ","lang":"en-US","frontmatter":{"title":"ç”Ÿäº§äº‹æ•…åˆ†äº«01ï¼šRedisç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®ä¸å½“å¯¼è‡´çš„çº¿ä¸Šæ•…éšœ","category":["ç”Ÿäº§äº‹æ•…"],"tag":["äº‹æ•…åˆ†æ","ç»éªŒæ€»ç»“","Redisç¼“å­˜","æ•…éšœæ’æŸ¥"],"order":1,"description":"ç”Ÿäº§äº‹æ•…åˆ†äº«01ï¼šRedisç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®ä¸å½“å¯¼è‡´çš„çº¿ä¸Šæ•…éšœ ğŸ“‹ äº‹æ•…æ¦‚è§ˆ ğŸ¯ éœ€æ±‚èƒŒæ™¯ å•†å“è¯¦æƒ…é¡µé¢é‡‡ç”¨Redisç¼“å­˜ä¼˜åŒ–ç­–ç•¥ï¼š ä½¿ç”¨Redis Hashç»“æ„å­˜å‚¨å•†å“è¯¦æƒ…æ•°æ® ç¼“å­˜Keyæ ¹æ®è¯·æ±‚å‚æ•°åŠ¨æ€æ„å»º ç¼“å­˜å‘½ä¸­æ—¶ç›´æ¥è¿”å›ï¼Œæœªå‘½ä¸­æ—¶æŸ¥è¯¢æ•°æ®åº“å¹¶æ›´æ–°ç¼“å­˜ ğŸ” é—®é¢˜æ’æŸ¥è¿‡ç¨‹ è¯¦ç»†æ’æŸ¥æ­¥éª¤ æ—¥å¿—åˆ†æ æ ¹æ®ç”¨æˆ·tidæœç´¢æ—¥å¿— å‘ç°åªæœ‰ç¬¬ä¸€æ¬¡è¯·æ±‚æœ‰...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ç”Ÿäº§äº‹æ•…åˆ†äº«01ï¼šRedisç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®ä¸å½“å¯¼è‡´çš„çº¿ä¸Šæ•…éšœ\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-06-30T16:02:20.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LiLiuMing\\",\\"url\\":\\"https://liliuming-truism.github.io\\"}]}"],["meta",{"property":"og:url","content":"https://liliuming-truism.github.io/posts/incident/ProductionIncidentShare01.html"}],["meta",{"property":"og:site_name","content":"ä¸€ä¸ªç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»"}],["meta",{"property":"og:title","content":"ç”Ÿäº§äº‹æ•…åˆ†äº«01ï¼šRedisç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®ä¸å½“å¯¼è‡´çš„çº¿ä¸Šæ•…éšœ"}],["meta",{"property":"og:description","content":"ç”Ÿäº§äº‹æ•…åˆ†äº«01ï¼šRedisç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®ä¸å½“å¯¼è‡´çš„çº¿ä¸Šæ•…éšœ ğŸ“‹ äº‹æ•…æ¦‚è§ˆ ğŸ¯ éœ€æ±‚èƒŒæ™¯ å•†å“è¯¦æƒ…é¡µé¢é‡‡ç”¨Redisç¼“å­˜ä¼˜åŒ–ç­–ç•¥ï¼š ä½¿ç”¨Redis Hashç»“æ„å­˜å‚¨å•†å“è¯¦æƒ…æ•°æ® ç¼“å­˜Keyæ ¹æ®è¯·æ±‚å‚æ•°åŠ¨æ€æ„å»º ç¼“å­˜å‘½ä¸­æ—¶ç›´æ¥è¿”å›ï¼Œæœªå‘½ä¸­æ—¶æŸ¥è¯¢æ•°æ®åº“å¹¶æ›´æ–°ç¼“å­˜ ğŸ” é—®é¢˜æ’æŸ¥è¿‡ç¨‹ è¯¦ç»†æ’æŸ¥æ­¥éª¤ æ—¥å¿—åˆ†æ æ ¹æ®ç”¨æˆ·tidæœç´¢æ—¥å¿— å‘ç°åªæœ‰ç¬¬ä¸€æ¬¡è¯·æ±‚æœ‰..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-06-30T16:02:20.000Z"}],["meta",{"property":"article:tag","content":"æ•…éšœæ’æŸ¥"}],["meta",{"property":"article:tag","content":"Redisç¼“å­˜"}],["meta",{"property":"article:tag","content":"ç»éªŒæ€»ç»“"}],["meta",{"property":"article:tag","content":"äº‹æ•…åˆ†æ"}],["meta",{"property":"article:modified_time","content":"2025-06-30T16:02:20.000Z"}]]},"git":{"createdTime":1749373220000,"updatedTime":1751299340000,"contributors":[{"name":"liuming.li","username":"","email":"liumingli15@163.com","commits":2}]},"readingTime":{"minutes":3.92,"words":1175},"filePathRelative":"posts/incident/ProductionIncidentShare01.md","excerpt":"\\n<h2>ğŸ“‹ äº‹æ•…æ¦‚è§ˆ</h2>\\n<table>\\n<thead>\\n<tr>\\n<th>é¡¹ç›®</th>\\n<th>è¯¦æƒ…</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><strong>æ•…éšœæ—¶é—´</strong></td>\\n<td>2025å¹´XæœˆXæ—¥ XX:XX - XX:XX</td>\\n</tr>\\n<tr>\\n<td><strong>å½±å“æ—¶é•¿</strong></td>\\n<td>çº¦10åˆ†é’Ÿ</td>\\n</tr>\\n<tr>\\n<td><strong>æ•…éšœç­‰çº§</strong></td>\\n<td>P1ï¼ˆä¸¥é‡ï¼‰</td>\\n</tr>\\n<tr>\\n<td><strong>å½±å“èŒƒå›´</strong></td>\\n<td>æŸå•†å“è¯¦æƒ…é¡µé¢å…¨éƒ¨ç”¨æˆ·</td>\\n</tr>\\n<tr>\\n<td><strong>æ•…éšœç°è±¡</strong></td>\\n<td>ç”¨æˆ·è¯·æ±‚å•†å“è¯¦æƒ…é¡µé¢æ—¶ç³»ç»Ÿå“åº”\\"å•†å“ä¸å­˜åœ¨\\"å¼‚å¸¸</td>\\n</tr>\\n</tbody>\\n</table>","autoDesc":true}');export{r as comp,d as data};
